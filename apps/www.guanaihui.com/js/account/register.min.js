function RegisterController(a){Controller.call(this),this.submitForm(),this.sendSms(),this.refreshValidateCode(),void 0!=a&&void 0!=a.successCallback&&(this.successCallback=a.successCallback,this.successHandler=a.successHandler),this.bindSmsCodeInput()}RegisterController.prototype.submitForm=function(){$("#btnRegister").on("click",function(){event.preventDefault();var a=$("#txtRegisterMobile").val(),b=/^1\d{10}$/,c=$("#txtRegisterValidateCode").val(),d=$("#txtRegisterSmsCode").val(),e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d]{6,20}$/,f=$("#txtPassword").val(),g=$("#txtPasswordZ").val();b.test(a)||$("#txtRegisterMobile").focus(),c||$("#txtRegisterValidateCode").focus(),d||$("#txtRegisterSmsCode").focus(),e.test(f)||$("#txtPassword").focus(),f!=g&&$("#txtPasswordZ").focus()})},RegisterController.prototype.sendSms=function(){var a=this;require([a.utilStaticPrefix+"/validation/js/languages/jquery.validationEngine-zh_CN.js",a.utilStaticPrefix+"/validation/js/jquery.validationEngine.js"],function(){$("#registerForm").validationEngine({promptPosition:"topLeft",autoHidePrompt:!0,autoHideDelay:5e3,showOneMessage:!0,maxErrorsPerField:1,validationEventTrigger:"",scroll:!1}),$("#btnRegisterGetSmsCode").on("click",function(b){var c,d=60,e=$(this),f=$("#txtRegisterMobile"),g=$("#txtRegisterSmsCode"),h=$("#txtRegisterValidateCode");if(void 0!=g.attr("data-validation-engine")&&(g.removeAttr("data-validation-engine"),g.removeAttr("data-errormessage-value-missing")),c=$("#registerForm").validationEngine("validate"),!c)return!1;if(e.hasClass(".disabled"))return!1;var i={mobile:$.trim(f.val()),captcha:$.trim(h.val()),t:2},j={process:function(a){e.addClass("disabled"),g.attr("data-validation-engine","validate[required]"),g.attr("data-errormessage-value-missing","短信动态码不能为空");var b=window.setInterval(function(){d-=1,e.html("重新发送("+d+"s)"),0===d&&(e.html("获取动态码"),e.removeClass("disabled"),g.removeAttr("data-validation-engine"),g.removeAttr("data-errormessage-value-missing"),window.clearInterval(b))},1e3)},onExceptionInterface:function(b,c){var d=Date.parse(new Date);$("span.change").prev("img").attr("src",a.imgValidationCodeApiUrl+"?ts="+d)}};a.request(a.sendSmsApiUrl,i,j),b.preventDefault()})})},RegisterController.prototype.refreshValidateCode=function(){var a=this;$("span.change").on("click",function(){var b=$(this).prev("#ddImg"),c=Date.parse(new Date);b.attr("src",a.imgValidationCodeApiUrl+"?ts="+c)}),$("span.change").prev("#ddImg").on("click",function(){var b=Date.parse(new Date);$(this).attr("src",a.imgValidationCodeApiUrl+"?ts="+b)})},RegisterController.prototype.bindSmsCodeInput=function(){var a=$("#txtRegisterSmsCode"),b=$("#txtRegisterMobile,#txtRegisterValidateCode"),c=$("#btnRegister");a.bind("keypress",function(a){"13"==event.keyCode&&(c.click(),a.preventDefault())}),b.bind("keypress",function(a){return"13"==event.keyCode?!1:void 0})},$(document).ready(function(){new RegisterController});