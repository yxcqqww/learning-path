function DetailController(){Controller.call(this),this.servicesCategory(),this.chooseStore(),this.showMore(),this.showProduct(),this.showReserveModual(),this.floater(),this.ajaxSet(),this.selTime()}DetailController.prototype.ajaxSet=function(){$.ajaxSetup({cache:!1}),$(".topper-service").load("/personal/toper/count",function(a){})},DetailController.prototype.chooseStore=function(){$("#shopSelector").find(".dropdown-menu li").click(function(){$("#shopSelector").find(".dropdown-menu li").removeAttr("data-selected"),$(this).attr("data-selected","selected"),$(this).trigger("change")}),$("#shopSelector").find(".dropdown-menu li").bind("change",function(){var a=$("#shopSelector").find(".dropdown-menu li[data-selected='selected']"),b=a.children("a").text(),c=a.attr("data-id"),d=a.attr("data-address"),e=a.attr("data-time");$("#shopSelector .j-shop-name").text(b),$("#storeId").val(c),$(".description .addr").text(d),$(".description .store-time").text(e),$(".btn-reserve").attr("data-reserve","/product/booking/dialog?pid="+$("#productId").val()+"&sId="+c+"&origin="+$("#origin").val())}),$("#shopSelector").find(".dropdown-menu li[data-selected='selected']").trigger("change")},DetailController.prototype.showMore=function(){0!==$("#showMore").size()&&$("#showMore").click(function(){var a=$(this);a.find("i").hasClass("icon-xiangxia2")?a.html("收起<i class='iconfont icon-xiangshang3'></i>"):a.html("更多机构门店 <i class='iconfont icon-xiangxia2'></i>"),a.find("i").hasClass("icon-xiangxia2")?a.siblings(".more-item").slideUp():a.siblings(".more-item").slideDown()})},DetailController.prototype.showProduct=function(){$(window).scroll(function(){$_windowScroll=$(window).scrollTop(),$_windowScroll>=540?$(".product-fixed").show():$(".product-fixed").hide()})},DetailController.prototype.showReserveModual=function(){var a=this;require([a.utilStaticPrefix+"/Datejs/build/date.min.js",a.appStaticPrefix+"/components/reserve.min.js",a.appStaticPrefix+"/account/login.min.js",a.appStaticPrefix+"/account/register.min.js"],function(){$(".btn-reserve").click(function(){var b=($(this),{}),c={process:function(b){0===parseInt(b.result)?a.popUpAccoountModule():a.popUpReserveModule()},onExceptionInterface:function(a,b){}};a.request(a.checkLoginApiUrl,b,c),ga("send","event","specialck","appointment","预约专项检查",parseInt($("#productId").val()))})})},DetailController.prototype.popUpReserveModule=function(){var a=this;a.dialog({tabindex:1,id:"module-reserve",effect:!1,url:$(".btn-reserve").attr("data-reserve")}),$("#module-reserve").on("loaded.bs.modal",function(b){new Reserve(a)})},DetailController.prototype.popUpAccoountModule=function(){var a=this;a.dialog({tabindex:2,id:"module-account",effect:!1,url:$(".btn-reserve").attr("data-account")}),$("#module-account").on("loaded.bs.modal",function(b){a.swapTabs(),new LoginController({successCallback:a.accountCallback,successHandler:a}),new RegisterController({successCallback:a.accountCallback,successHandler:a})})},DetailController.prototype.accountCallback=function(a,b){var c=b,d=0===a.name.length?a.mobile:a.name;$(".toper .pull-right a").remove();var e='<a id="userBox" href="javascript:;" >        <i class="icon-bg-manage icon-toper-user"></i>        <span>'+d+'</span>        <i class="icon-bg-manage icon-toper-arrow-down"></i>        </a>        <a id="msgBox" href="/personal/news">        <i class="icon-bg-manage icon-toper-msg"></i>        </a>        <a id="logout" href="/logout">退出</a>        <ul class="hide">        <li><a href="/personal/booking/spec">专项检查预约</a></li>        <li><a href="/personal/booking/chk">体检预约</a></li>        <li><a href="/personal">个人中心</a></li>        <li><a href="/personal/giftcard">绑定礼品卡</a></li>        </ul>';$(".toper .pull-right").append(e),$("#module-account").modal("hide"),c.popUpReserveModule()},DetailController.prototype.selTime=function(){$("body").on("change","#sel",function(){$("#bookingEndTime").val($(this).children("option:selected").html())}),$("body").on("click",".backDate",function(a){$("#datepicker h4,#datepicker select").hide(),$("#datepicker .datepicker-inline").show(),$("#module-reserve .date #datepicker").css("padding","0 30px 10px"),$("#datepicker").css("width","300px"),$(".date h3").html("选择日期")})},$(document).ready(function(){new DetailController});