function EditPersonal(){Controller.call(this),this.initDatePicker(),this.servicesCategory(),this.initDropdown(),this.submitForm(),this.ajaxSet()}EditPersonal.prototype.ajaxSet=function(){$.ajaxSetup({cache:!1}),$(".topper-service").load("/personal/toper/count",function(a){})},EditPersonal.prototype.initDatePicker=function(){var a=$("#datepicker").val();$("#datepicker").datepicker({format:"yyyy/mm/dd",language:"zh-CN",startdate:a,autoclose:!0}),$("#datepicker").on("changeDate",function(){$("#hiddenDate").val($("#datepicker").datepicker("getFormattedDate"))})},EditPersonal.prototype.initDropdown=function(){var a=this,b=$("#hd_defaultProvince").val(),c=$("#hd_defaultCity").val();require([a.utilStaticPrefix+"/cascadeSelect/jquery.cascadeselect.min.js"],function(){$("#cityList").cascadeSelect({url:"/personal/area/data",defaultVals:[b,c],nameAttrs:["personLongestLivingProvince","personLongestLivingCity"],classAttrs:["form-control input-sm","form-control input-sm"],crossDomain:!0,level:2})})},EditPersonal.prototype.submitForm=function(){var a=this;require([a.utilStaticPrefix+"/jquery.asyncsubmit.js"],function(){$("#personalForm").asyncsubmit({dataType:a.apiDataType,scroll:!1,utilStaticPrefix:a.utilStaticPrefix,apiUrl:a.loginApiUrl,beforeSaveInterface:function(){},onSavingInterface:function(){},onErrorInterface:function(){a.tips("请求失败，请检查您的接口！",3)},onSuccessInterface:function(a){window.location.href="/personal/info"},onExceptionInterface:function(b){a.tips('<span class="text-danger">'+b+"</span>",5)}})})},$(document).ready(function(){new EditPersonal});