function News(){Controller.call(this),this.servicesCategory(),this.addListenerToListItem(),this.inpclickListener(),this.newsdelete(),this.ajaxSet()}News.prototype.ajaxSet=function(){$.ajaxSetup({cache:!1}),$(".topper-service").load("/personal/toper/count",function(a){})},News.prototype.addListenerToListItem=function(){var a=this;$("body").on("click",".news-list dl:not(.readed,.stop-event)",function(){var b=$(this);b.addClass("stop-event");var c={id:b.find("#notificationId").val()},d={type:"POST",process:function(a){b.hasClass("readed")||b.addClass("readed").find("dt i").removeClass("icon-bg-unreadMsg").addClass("icon-bg-readedMsg"),a.result<=0&&($("#notifFlag")?$("#notifFlag").remove():null),b.removeClass("stop-event")},onExceptionInterface:function(a,c){b.removeClass("stop-event")}};a.request(a.apiPrefix+"personal/news/read.do",c,d)})},News.prototype.inpclickListener=function(){$(".title p input").click(function(a){a.stopPropagation();var b=$(this);if(b.is(":checked")?$(".news input:checkbox").prop("checked",!0):$(".news input:checkbox").removeAttr("checked"),0==$(".news-list dl").length)for(var c=0;c<$(".title p input").length;c++)$(".title p input").eq(c).css("disabled","true")}),$(".inpwrap input").click(function(a){a.stopPropagation()})},News.prototype.newsdelete=function(){var a=this;0==$(".news-list dl").length&&($(".title p input").attr("disabled","true"),$(".deall").remove());var b;$(".titlebot .deall").click(function(a){for(var c=[],d=0;d<$(".news-list dl").length;d++){var e=$(".news-list dl").eq(d).find("input:checkbox");e.prop("checked")&&c.push(e)}0!=c.length&&(b=$(this),$(".pop-cover,.popUp-delete").show())}),$(".delete span").click(function(c){0==$(".news-list dl").length?a.tips("抱歉，系统忙，请联系客服！"):(c.stopPropagation(),b=$(this),$(".pop-cover,.popUp-delete").show())}),$(".popUp-delete button.closer").click(function(a){$(".pop-cover,.popUp-delete").hide()}),$(".popUp-delete i").click(function(a){$(".pop-cover,.popUp-delete").hide()}),$(".popUp-delete").find(".ensure").on("click",function(){if("deall"==b.attr("class")){var c=$(".news-list").find('input[type="checkbox"]'),d=($(".news-list").find("dl"),[]),e=[];$.each(c,function(a,b){b.checked&&(d.push(Number(b.id)),e.push($(b).closest("dl")[0]))}),a.request(a.personnalDuoNewsUrl,{id:d.join(",")},{process:function(){$.each(e,function(a,b){$(b).remove()}),$(".pop-cover,.popUp-delete").hide();var a=window.location.href.split("?");window.location.href=a[0]}})}else{var f=b.attr("data-id");a.request(a.personnalNewsUrl,{id:f},{process:function(a){$(".pop-cover,.popUp-delete").hide(),b.parents("dl").remove(),location.reload(),0==$(".news-list dl").length&&$(".title p input").attr("disabled","true")}})}})},$(document).ready(function(){new News});