function SepecialAppointment(){Controller.call(this),this.servicesCategory(),this.swapTabs(),this.showDetails(),this.showComments(),this.confirmComment(),this.dropBookingHandler(),this.delBookingHandler(),this.ajaxSet()}SepecialAppointment.prototype.ajaxSet=function(){$.ajaxSetup({cache:!1}),$(".topper-service").load("/personal/toper/count",function(a){})},SepecialAppointment.prototype.showDetails=function(){$("dd.col-5 a").on("click",function(){var a=$(this),b=a.parents("dl").siblings(".mark-list"),c=b.find(".mark-options-item ul"),d=b.find("input:radio");b.hasClass("hide")||(b.addClass("hide"),c.addClass("hide"),c.find("a[data-flag]").removeClass("active"),d.removeAttr("checked"));var e=a.parents(".item").eq(0).find("#bookingId").val();a.parents(".item").eq(0).find(".booking-details").load("/personal/booking/step/"+e,function(){$(this).removeClass("hide")})}),$("body").on("click",".booking-details .op",function(){var a=$(this),b=a.parent();b.hasClass("hide")||b.addClass("hide")})},SepecialAppointment.prototype.showComments=function(){$(".btnShowMask").on("click",function(){var a=$(this),b=a.parents("dl").siblings(".booking-details"),c=a.parents("dl").siblings(".mark-list");c.hasClass("hide")&&c.removeClass("hide"),b.hasClass("hide")||b.addClass("hide")}),$(".mark-list .cancel").on("click",function(){var a=$(this).parents(".mark-list"),b=a.find(".mark-options-item ul"),c=a.find("input:radio");b.addClass("hide"),b.find("a[data-flag]").removeClass("active"),c.removeAttr("checked"),a.addClass("hide"),$(".promo").show()}),$("body").on("click",".mark-list li[data-flag]",function(){var a=$(this);a.hasClass("active")?a.removeClass("active"):a.addClass("active");var b=$(this).parents(".mark-list").eq(0);b.find("li[data-flag].active").length>0?b.find("#btnComment").removeClass("disabled"):b.find("#btnComment").hasClass("disabled")||b.find("#btnComment").addClass("disabled")}),$(".mark-list input:radio").on("click",function(){var a=$(this),b=a.parent().siblings(".mark-options-item"),c=b.find("li[data-flag]"),d=b.find("li[data-flag='"+a.data("for")+"']");b.find("ul").removeClass("hide"),b.find("span").hide(),c.addClass("hide").removeClass("active"),d.removeClass("hide");var e=$(this).parents(".mark-list").eq(0);e.find("li[data-flag].active").length>0?e.find("#btnComment").removeClass("disabled"):e.find("#btnComment").hasClass("disabled")||e.find("#btnComment").addClass("disabled")})},SepecialAppointment.prototype.confirmComment=function(){var a=this;$("body").on("click","#btnComment",function(){var b=$(this);if(b.hasClass("disabled"))return!1;b.attr("disabled","disabled");var c="",d=$(".mark-options-item li.active");d.each(function(a,b){c+=$(b).attr("data-tagId"),c+=","}),c=""==c?c:c.substring(0,c.length-1);var e={tagIds:c,bookingId:b.parents(".item").eq(0).find("#bookingId").val()},f={process:function(a){window.history.go(0)},onExceptionInterface:function(a,c){b.removeAttr("disabled")}};a.request("/personal/comment.do",e,f)})},SepecialAppointment.prototype.dropBookingHandler=function(){$("body").on("click",".j-drop-booking",function(){$("#guanaihuiCancel").modal()})},SepecialAppointment.prototype.delBookingHandler=function(){var a=this;$("body").on("click",".j-del-booking",function(){var b=$(this);a.confirm({content:"您确认要删除预约吗？？",confirmInterface:function(){var c=b.attr("data-id"),d={id:c},e={process:function(a){window.history.go(0)},onExceptionInterface:function(a,b){}};a.request("/personal/booking/del.do",d,e)}})})},$(document).ready(function(){new SepecialAppointment});