function ArrangeController(){Controller.call(this),this.initDatePicker(),this.bind()}ArrangeController.prototype.initDatePicker=function(){$("#txtBeginDate").datetimepicker({language:"zh-CN",autoclose:!0,format:"yyyy-mm-dd hh:00",minView:1,startDate:new Date,endDate:"+60d"}).on("changeDate",function(a){var b=$(this),c=b.val().substring(0,4),d=b.val().substring(5,7),e=b.val().substring(8,10),f=parseInt(b.val().substring(11,13)),g=new Array;$("#txtEndDate").val(c+"-"+d+"-"+e+" "+(f+1)+":00");for(var h=0;f>=h;h++)g.push(h);$("#txtEndDate").datetimepicker("setHoursDisabled",g),parseInt(d)>0&&(d=parseInt(d)-1),$("#txtEndDate").datetimepicker("setStartDate",new Date(c,d,e,0,0,0)),$("#txtEndDate").datetimepicker("setEndDate",new Date(c,d,e,23,0,0))}),$("#txtEndDate").datetimepicker({language:"zh-CN",autoclose:!0,format:"yyyy-mm-dd hh:00",minView:1,startView:1}).on("show",function(a){""==$("#txtBeginDate").val()&&$(this).datetimepicker("hide")})},ArrangeController.prototype.bind=function(){var a=this;$(".op .save").on("click",function(){var b=$("#txtBeginDate").val(),c=$("#txtEndDate").val();if(0===b.length||0===c.length)return a.tips("<span class='text-danger'>请选择预约时间</span>",3),!1;var d="<div style='margin-left:10px;font-size:14px;'>请核实以下更改信息：<br/>";d+="<p class='text-primary'>预约时间(意向):"+$("#lblOriginBookingDate").html()+"</p>",d+="<p class='text-primary'>预约时间(最终):"+b+"--"+c+"</p>",d+="<p class='text-danger'>*时间确定后不可修改，并且订单状态会流转至「待评价」状态。</p>",d+="</div>",a.confirm({title:"档期安排确认",content:d,confirmInterface:function(){$("#detailsForm").submit()}})})},$(document).ready(function(){new ArrangeController});