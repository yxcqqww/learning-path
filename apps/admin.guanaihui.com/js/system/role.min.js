function RoleController(a){this.rolePanel=a.rolePanel,this.parentClass=a.parentClass,this.bind(),this.save()}RoleController.prototype.bind=function(){var a=this;$(".perm-ids").delegate("li","click",function(){var e=$(this),t=e.parent("ul").attr("class");"role-module"==t?a.moduleClickHander(e):"role-list"==t&&a.roleListClickHander(e)}),$("#selectRole").click(function(){$(".role-list li.active").each(function(){var e=$(this),t=(e.attr("data-value"),$('<span class="remove"><i class="iconfont icon-shanchu1"></i></span>')),l=e.clone();l.append(t).removeClass("active"),$(".role-result").append(l),e.addClass("hide"),a.inputValHander()})}),$(".role-result").on("click",".remove",function(){a.removeHander($(this).parent("li")),a.inputValHander()}),$("h3 .empty").click(function(){$(".role-result li").each(function(){var e=$(this);a.removeHander(e)}),a.inputValHander()}),$('[data-toggle="tooltip"]').tooltip()},RoleController.prototype.removeHander=function(a){var e=a,t=e.attr("data-value"),l=$(".role-module li[class='active']").attr("data-flag");e.remove(),$(".role-list").find("li[data-value='"+t+"'][data-flag='"+l+"']").removeClass("hide").removeClass("active")},RoleController.prototype.inputValHander=function(){var a=[];$(".role-result li").each(function(){var e=$(this);a.push(e.attr("data-value"))}),$("#permIds").val(a.join(","))},RoleController.prototype.moduleClickHander=function(a){var e=a.attr("data-flag");a.addClass("active").siblings("li").removeClass("active"),$(".role-list").find("li").removeClass("active");var t=$(".role-list").find("li[data-flag='"+e+"']"),l=$(".role-result").find("li[data-flag='"+e+"']");t.removeClass("hide").siblings("li[data-flag!='"+e+"']").addClass("hide"),t.each(function(){var a=$(this),e=!1;l.each(function(){var t=$(this);a.attr("data-value")==t.attr("data-value")&&(e=!0)}),e&&a.addClass("hide")})},RoleController.prototype.roleListClickHander=function(a){a.toggleClass("active")},RoleController.prototype.save=function(){var a=this;require([this.parentClass.utilStaticPrefix+"/jquery.asyncsubmit.min.js"],function(){$(a.rolePanel).find("form").asyncsubmit({utilStaticPrefix:a.parentClass.utilStaticPrefix,dataType:a.parentClass.apiDataType,onSavingInterface:function(){a.parentClass.tips("正在进行处理，请稍等...",2)},onErrorInterface:function(){a.parentClass.tips("请求失败，请检查您的接口！",2)},onSuccessInterface:function(){a.parentClass.tips("角色保存成功！",2,function(){window.location.reload()})},onExceptionInterface:function(e){a.parentClass.tips('<span class="text-danger">'+e+"</span>",5)}})})};