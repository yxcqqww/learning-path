function BrandController(a){this.brandPanel=a.brandPanel,this.parentClass=a.parentClass,this.instanceCascade(),this.initSelectOptions(),this.instanceSelect2(),this.save()}BrandController.prototype.instanceCascade=function(){var a=this;require([this.parentClass.utilStaticPrefix+"/cascadeSelect/jquery.cascadeselect.min.js"],function(){var b=new Array,c=$(a.brandPanel).find("input[name='areaId']").val();c&&(c=$.trim(c)),c&&(b=c.split(",")),$(a.brandPanel).find(".location-linkage").cascadeSelect({url:a.parentClass.utilStaticPrefix+"/cascadeSelect/data.json",crossDomain:!0,nameAttrs:["province","city","district"],classAttrs:["form-control input-sm","form-control input-sm","form-control input-sm"],defaultVals:b,onInitInterface:function(){$(a.brandPanel).find(".location-linkage select[name='district']").attr("data-validation-engine","validate[required]")}});var d="true"===$("#isTjt").val()?a.parentClass.apiUrl.shop.categories.tjtList:a.parentClass.apiUrl.shop.categories.list,e=new Array,f=$(a.brandPanel).find("input[name='categoryId']").val();f&&(f=$.trim(f)),f&&(e=f.split(",")),$(a.brandPanel).find(".category-path").cascadeSelect({level:2,url:d,crossDomain:!0,jsonpCallback:"getCategory",nameAttrs:["primary","secondary"],classAttrs:["form-control input-sm","form-control input-sm"],defaultVals:e,dataKey:"cateGoryList",onInitInterface:function(){$(a.brandPanel).find(".category-path select[name='secondary']").attr("data-validation-engine","validate[required]")}})})},BrandController.prototype.instanceSelect2=function(a){$(this.brandPanel).find("select[name='tags']").select2({placeholder:"请选择",width:"100%"})},BrandController.prototype.save=function(){var a=this;require([this.parentClass.utilStaticPrefix+"/jquery.asyncsubmit.min.js"],function(){$(a.brandPanel).find("form").asyncsubmit({utilStaticPrefix:a.parentClass.utilStaticPrefix,dataType:a.parentClass.apiDataType,onSavingInterface:function(){a.parentClass.tips("正在进行处理，请稍等...")},onErrorInterface:function(){a.parentClass.tips("请求失败，请检查您的接口！",2)},onSuccessInterface:function(b){a.parentClass.tips("机构信息保存成功！",2,function(){window.location.reload()})},onExceptionInterface:function(b){a.parentClass.tips('<span class="text-danger">'+b+"</span>",5)}})})},BrandController.prototype.initSelectOptions=function(){var a=$(this.brandPanel).find("input[name='tagIds']").val(),b=new Array;a&&(b=a.split(",")),$(this.brandPanel).find("select[name='tags'] option").each(function(){-1!==$.inArray($(this).attr("value"),b)&&$(this).attr("selected","selected")})};