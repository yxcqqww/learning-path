function BranchController(t){this.quickPanel=t.quickPanel,this.parentClass=t.parentClass,this.instanceSwitch(),this.initOptional(),this.instanceCascade(),this.initCalendar(),this.bind(),this.save()}BranchController.prototype.bind=function(){var t=this;$(this.quickPanel).find(".tools .cancel").click(function(){t.close()})},BranchController.prototype.close=function(){$(this.quickPanel).slideUp(200)},BranchController.prototype.initOptional=function(){$(this.quickPanel).find(".switcher").each(function(){var method=0===$(this).find(":checked").size()?"hide":"show";eval("$(this).find('.optional')."+method+"(100);")})},BranchController.prototype.instanceSwitch=function(){var t=this;require([this.parentClass.bootstrapStaticPrefix+"/plugins/bootstrap-switch/dist/js/bootstrap-switch.min.js"],function(){$(t.quickPanel).find(".switcher").each(function(){var t=$(this),i=t.find("input[type='checkbox']");i.bootstrapSwitch({size:"small",onText:"是",offText:"否"}),i.on("switchChange.bootstrapSwitch",function(i,n){n?t.find(".optional").show(100):t.find(".optional").hide(100),t.find("input[type='hidden']").val(n)})})})},BranchController.prototype.instanceCascade=function(){var t=this;require([this.parentClass.utilStaticPrefix+"/cascadeSelect/jquery.cascadeselect.min.js"],function(){var i=$(t.quickPanel).find("input[name='areaId']").val(),n=new Array;i&&(i=$.trim(i)),i&&(n=i.split(",")),$(t.quickPanel).find(".cascade").cascadeSelect({url:t.parentClass.utilStaticPrefix+"/cascadeSelect/data.json",crossDomain:!0,nameAttrs:["province","city","district"],defaultVals:n,classAttrs:["form-control input-sm","form-control input-sm","form-control input-sm"],onInitInterface:function(){$(t.quickPanel).find(".cascade select[name='district']").attr("data-validation-engine","validate[required]")}})})},BranchController.prototype.initCalendar=function(){var t=this;require([this.parentClass.bootstrapStaticPrefix+"/plugins/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"],function(){$.fn.datetimepicker.defaults.language="zh-CN",$(t.quickPanel).find("input[name='openingTime'],input[name='closingTime']").datetimepicker({format:"hh:ii",language:"zh-CN",weekStart:1,autoclose:1,minuteStep:15,startView:1,maxView:0,minView:0,forceParse:0}).on("changeDate",function(){})})},BranchController.prototype.save=function(){var t=this;require([this.parentClass.utilStaticPrefix+"/jquery.asyncsubmit.min.js"],function(){$(t.quickPanel).asyncsubmit({utilStaticPrefix:t.parentClass.utilStaticPrefix,dataType:t.parentClass.apiDataType,beforeSaveInterface:function(){},onSavingInterface:function(){t.parentClass.tips("正在进行处理，请稍等...",2)},onErrorInterface:function(){t.parentClass.tips("请求失败，请检查您的接口！",2)},onSuccessInterface:function(){t.parentClass.tips("门店保存成功！",2,function(){window.location.reload()})},onExceptionInterface:function(i){t.parentClass.tips('<span class="text-danger">'+i+"</span>",5)}})})};