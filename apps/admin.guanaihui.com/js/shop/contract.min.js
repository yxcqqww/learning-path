function ContractController(t){this.quickPanel=t.quickPanel,this.parentClass=t.parentClass,this.instanceSwitch(),this.initOptional(),this.instanceMyCheck(),this.initCalendar(),this.instanceDialog(),this.bind(),this.save()}ContractController.prototype.bind=function(){var t=this;$(this.quickPanel).find(".tools .cancel").click(function(){t.close()}),$(this.quickPanel).find("select[name='contractType']").change(function(){t.changeTrafficCount()})},ContractController.prototype.instanceMyCheck=function(){var t=$(this.quickPanel).find(".gift .my-check"),n=this;t.click(function(){t.removeClass("icon-18-radio-checked").addClass("icon-18-radio-unchecked"),$(this).addClass("icon-18-radio-checked").removeClass("icon-18-radio-unchecked"),$(n.quickPanel).find(".gift input[name='bannerType']").val($(this).attr("data-value"))})},ContractController.prototype.close=function(){$(this.quickPanel).slideUp(200)},ContractController.prototype.initOptional=function(){$(this.quickPanel).find(".gift").each(function(){var method=0===$(this).find(":checked").size()?"hide":"show";eval("$(this).find('.optional')."+method+"(100);")})},ContractController.prototype.initCalendar=function(){var t=this;require([this.parentClass.bootstrapStaticPrefix+"/plugins/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"],function(){$.fn.datetimepicker.defaults.language="zh-CN",$(t.quickPanel).find(".content input[name='signOn']").datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",weekStart:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0}).on("changeDate",function(){})})},ContractController.prototype.instanceSwitch=function(){var t=this;require([this.parentClass.bootstrapStaticPrefix+"/plugins/bootstrap-switch/dist/js/bootstrap-switch.min.js"],function(){$(t.quickPanel).find(".gift").each(function(){var n=$(this),i=n.find("input[type='checkbox']");i.bootstrapSwitch({size:"small",onText:"是",offText:"否"}),i.on("switchChange.bootstrapSwitch",function(a,e){e?n.find(".optional").show(100):n.find(".optional").hide(100);var o=i.attr("id");"trafficFlagHandle"===o?(n.find("input[name='trafficFlag']").val(e),e||n.find("input[name='trafficCount']").val(""),t.changeTrafficCount()):"bannerFlagHandle"===o&&(n.find("input[name='bannerFlag']").val(e),e||n.find("input[name='bannerType']").val(""),e||n.find(".my-check").removeClass("icon-18-radio-checked").addClass("icon-18-radio-unchecked"))})})})},ContractController.prototype.instanceDialog=function(){var t=this;$(this.quickPanel).find(".dialog-handle").click(function(){var n=$(this).attr("data-dialog-id");t.parentClass.dialog({id:n,url:$(this).attr("data-href"),dimension:"lg"}),$("#"+n).on("loaded.bs.modal",function(){require([t.parentClass.appStaticPrefix+"/public/select-users.min.js"],function(){new SelectUsersController({usersPanel:$("#"+n),parentClass:t.parentClass,maximum:1,onSelected:function(i,a){$(t.quickPanel).find("input[name='bdNames']").val(a),$(t.quickPanel).find("input[name='bdId']").val(i),$("#"+n).modal("hide")}})})})})},ContractController.prototype.save=function(){var t=this;require([this.parentClass.utilStaticPrefix+"/jquery.asyncsubmit.min.js"],function(){$(t.quickPanel).asyncsubmit({utilStaticPrefix:t.parentClass.utilStaticPrefix,dataType:t.parentClass.apiDataType,onSavingInterface:function(){t.parentClass.tips("正在进行处理，请稍等...")},onErrorInterface:function(){t.parentClass.tips("请求失败，请检查您的接口！",2)},onSuccessInterface:function(){t.parentClass.tips("合同保存成功！",2,function(){window.location.reload()})},onExceptionInterface:function(n){t.parentClass.tips('<span class="text-danger">'+n+"</span>",5)}})})},ContractController.prototype.changeTrafficCount=function(){var t=$(this.quickPanel).find("select[name='contractType']").val(),n=$(this.quickPanel).find("input[name='trafficFlag']").val(),i=0;""!==t&&"false"!==n&&""!==n&&("0"===t?i=20:"1"===t?i=50:"2"===t&&(i=100)),$(this.quickPanel).find("input[name='trafficCount']").val(i)};