function getDaysInMonth(t,a){var e=t,d=a++;a>12&&(d-=12,e++);var s=new Date(e,d,1);return new Date(s.getTime()-864e5).getDate()}$.fn.dateShow=function(){var t=$(this),a=t.parent(),e=t.attr("name");if(!e)return void console.error("请为日历指定一个name");t.addClass("date");for(var d=t.attr("data-today"),s=t.attr("month"),n=s.split("-")[0],o=s.split("-")[1],r=void 0===d?"":d.split("-")[2],i=getDaysInMonth(n,o),l=n+"-"+o,v=[],f=0;i>=f;f++)f>r&&v.push(f);for(var c=n+"-"+o+"-"+(parseInt(r)+1),h=l.substr(0,4)+"-"+l.substr(5),p=l.substr(0,4)+"-"+l.substr(5)+"-01",m=new Date(p),C=0==m.getDay()?0:m.getDay(),u="",y=1;i>=y;){var b=1;if(u+="<tr>",1==y)for(var g=1;C>g;g++)b++,u+="<td><span></span></td>";for(;7>=b;b++)u+=i>=y?"<td date='"+y+"' data-date='"+h+"-"+y+"'> <span>"+y+"</span></td>":"<td><span></span></td>",y++;u+="</tr>"}t.append(u),void 0===d?t.addClass("hide"):d.split("-")[2];for(var f=0;f<v.length;f++)t.find("[date='"+v[f]+"']").addClass("able").on("click",function(){var t=$(this);a.find("td").removeClass("on"),a.find("td span").removeClass("active"),t.addClass("on"),t.find("span").addClass("active"),$("#myDate").val(t.attr("data-date"))});$(".date-tool").off("click").on("click","li.active",function(){var t=$(this),a=parseInt($(".date-tool .year").text()),e=parseInt($(".date-tool .month").text());t.removeClass("active").siblings(".tool").addClass("active"),$(".table-condensed tbody.hide").removeClass("hide").siblings("tbody").addClass("hide"),t.hasClass("next")?e>=12?($(".date-tool .month").text("1"),$(".date-tool .year").text(a+1)):$(".date-tool .month").text(e+1):1>=e?($(".date-tool .month").text("12"),$(".date-tool .year").text(a-1)):$(".date-tool .month").text(e-1)}),0==a.find("td.on").length&&t.find("[data-date='"+c+"']").addClass("on").find("span").addClass("active");var x={_date:t,reset:function(){$(".date[name='"+t.attr("name")+"'] td[date]").removeClass("selected"),$("#"+t.attr("name")).val("")}};return x};