function MzDetailController(){Controller.call(this),this.ajaxFill()}MzDetailController.prototype.ajaxFill=function(){function a(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?window.unescape(c[2]):null}var b,c=this,d=null,e=null;b=a("p"),shopId=a("s");var f=c.detailUrl+b;$.ajax({url:f,dataType:"JSONP",data:{productId:b,areaId:38,shopId:shopId,longitude:d,latitude:e},success:function(a){var b=a.result,c="",d="",e="",f="",g="";c+='<div class="bannerImg"><img src="'+b.product.productLogo+'"><div class="bannerCon"><h3>'+b.product.productName+"</h3><p>"+b.product.description+'</p></div></div><div class="priceCon"><span >￥'+b.product.discountedPrice+"</span><s>￥"+b.product.retailedPrice+"</s></div>",$(".bannerWrap").append(c),g="0"==b.product.grade?"未入驻":"已入驻",d+='<div class="medicalName"><h4>'+b.product.companyName+'</h4><span class="shopTitle">'+b.product.shopCount+'店</span><span class="inShopTitle">'+g+'</span><div class="button"><a href="companydetail.html?s='+b.product.shopId+"&c="+b.product.companyId+'">查看机构<i></i><em></em></a></div></div><div class="medicalDec"><h3>'+b.product.shopName+'</h3><p class="pAddress"><i>营业时间：</i><em style="width:100%;">'+b.product.businessHours+'</em></p><div class="pAddress"><i>营业地址：</i><em>'+b.product.shopAddress+'</em><span class="medicalDecMin">'+b.product.distance+"km</span></div></div> ",$(".medicalCon").append(d),null==b.product.distance?$(".medicalDecMin").html(""):b.product.distance>1e3?$(".medicalDecMin").html(b.product.distance/1e3+"km"):$(".medicalDecMin").html(b.product.distance+"m"),e+='<h4>服务明细</h4><ul class="detailConUl">',$.each(b.product.itemList,function(a,b){e+="<li><span>"+b.name+"</span><span>"+b.serviceCount+"次</span><span>￥"+b.price+"</span></li>"}),e+='</ul><ul class="detailConTitle"><li><span>总价值</span><span>￥'+b.product.retailedPrice+'</span></li><li><span>预约价</span><span class="titleLast">￥'+b.product.discountedPrice+"</span></li></ul>",$(".detailCon").append(e),f+='<h4 class="detOrder">预约须知</h4><ul class="orderConUl">',$.each(b.product.noteList,function(a,b){f+='<li><span class="time"></span><div class="divTime"><span >'+b.content+"</span></div></li>"}),f+="</ul>",$(".orderCon").append(f)}})},$(function(){new MzDetailController});