/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：m.guanaihui.com
 2. 页面名称：spring-beauty.html (春之美-健康节)
 3. 作者：俞晓晨(yuxiaochen@guanaihui.com)
 4. 备注：
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
function SpringBeautyPromotionController() {
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
     继承于Controller基类
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    Controller.call(this);

    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
     初始化native 跳转Url
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.initNativeRedirectUrl();

    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
     增加对于滚动事件的监听
     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.addListenerToScroll();
}


/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
初始化native 跳转Url
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
SpringBeautyPromotionController.prototype.initNativeRedirectUrl = function() {
    var classSelf = this;
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;

    var downloadUrl = "http://a.app.qq.com/o/simple.jsp?pkgname=com.guanaihui.app";

    // if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {
    //     downloadUrl = "https://itunes.apple.com/cn/app/guan-ai-hui/id1036167230?mt=8";
    // } else if (userAgent.match(/Android/i)) {
    //     downloadUrl = "http://mobile-app.oss-cn-hangzhou.aliyuncs.com/download/android/guanaihui.apk";
    // }

    $(".btn-booking").on("click", function() {

        ga('send', 'event', 'button', 'click', 'chunzhimei');

        window.location.href = downloadUrl;
    });

    //指定body margin-top 的值
    $("body").css("margin-bottom",$(".fixed-bar").height()+10);
}

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
增加对于滚动事件的监听
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
SpringBeautyPromotionController.prototype.addListenerToScroll = function() {
    var classSelf = this;

    // $(window).on("scroll", function() {
    //     var $fixedBar = $(".fixed-bar");

    //     $(".lblScrollText").html($(window).scrollTop());
    //     if ($(window).scrollTop() > 0) {
    //         $fixedBar.css("position", "fixed");
    //     } else {
    //         $fixedBar.css("position", "relative");
    //     }
    // });
}

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
类的初始化
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function() {
    new SpringBeautyPromotionController;
});
