!function(t){t.fn.areaSelect=function(n){var e=t.extend({},t.fn.areaSelect.defaults,n),a=e.crossDomain?"jsonp":"json",o=e.crossDomain?"GET":e.requestType,i=e.jsonpCallback;return e.url?this.each(function(){var n=t(this);return 0===n.find("select").length?void console.error("no select html element finded"):void("string"==typeof e.url?t.ajax({url:e.url,type:o,dataType:a,data:o,jsonpCallback:i,success:function(a){t.fn.areaSelect.init(n,e,a.result)},error:function(){console.error("ajax error")}}):t.fn.areaSelect.init(n,e,t.parseJSON(e.url)))}):void console.error("url is null")},t.fn.areaSelect.init=function(n,e,a){var o,i=n.find("select.prov"),l=n.find("select.city"),r=n.find("select.dist"),c=e.required?"":"<option value=''>请选择</option>";if(o=c,t.each(a.areaList,function(t,n){var e=Object.keys(n);o+="<option value='"+e[0]+"' data-name='"+n[e[0]]+"' data-options='"+window.JSON.stringify(n[e[1]])+"'>"+n[e[0]]+"</option>"}),i.html(o),l.empty().html("<option value=''>请选择</option>"),r.empty().html("<option value=''>请选择</option>"),null!=e.prov){var s=i.find("option[data-name='"+e.prov+"']");if(null!=s&&(i.val(s.val()),t.fn.areaSelect.cityStart(i,l,r,e)),null!=e.city){var u=l.find("option[data-name='"+e.city+"']");if(null!=u&&(l.val(u.val()),t.fn.areaSelect.distStart(l,r,e)),null!=e.dist){var d=r.find("option[data-name='"+e.dist+"']");null!=d&&r.val(d.val())}}}i.on("change",function(){t.fn.areaSelect.cityStart(i,l,r,e)}),l.on("change",function(){t.fn.areaSelect.distStart(l,r,e)})},t.fn.areaSelect.cityStart=function(n,e,a,o){var i=o.required?"":"<option value=''>请选择</option>",l=n.find("option[value='"+n.val()+"']").data("options");return e.empty().html("<option value=''>请选择</option>"),a.empty().html("<option value=''>请选择</option>"),void 0==l||""===l?void("none"==o.nodata&&(e.css("display","none"),a.css("display","none"))):(t.each(l,function(t,n){var e=Object.keys(n);i+="<option value='"+e[0]+"' data-name='"+n[e[0]]+"' data-options='"+window.JSON.stringify(n[e[1]])+"'>"+n[e[0]]+"</option>"}),e.html(i).css({display:""}),void t.fn.areaSelect.distStart(e,a,o))},t.fn.areaSelect.distStart=function(n,e,a){var o=a.required?"":"<option value=''>请选择</option>",i=n.find("option[value='"+n.val()+"']").data("options");return e.empty().html("<option value=''>请选择</option>"),void 0==i||""===i?void("none"==a.nodata&&e.css("display","none")):(t.each(i,function(t,n){var e=Object.keys(n);o+="<option value='"+e[0]+"' data-name='"+n[e[0]]+"'>"+n[e[0]]+"</option>"}),void e.html(o).css({display:""}))},t.fn.areaSelect.defaults={url:null,prov:null,city:null,dist:null,nodata:null,required:!1,crossDomain:!1,requestType:"GET",jsonpCallback:"callBack"}}(jQuery);