!function(a){a.fn.asyncsubmit=function(b){var c=a.extend({},a.fn.asyncsubmit.defaults,b);return this.each(function(){var b=a(this).hasClass("validate"),d=this;b&&require([c.utilStaticPrefix+"/validation/js/languages/jquery.validationEngine-zh_CN.js",c.utilStaticPrefix+"/validation/js/jquery.validationEngine.js"],function(){a(d).validationEngine({promptPosition:c.promptPosition,autoHidePrompt:!0,autoHideDelay:5e3,scroll:c.scroll})}),a(this).submit(function(){return c.beforeSaveInterface&&c.beforeSaveInterface(),a(this).validationEngine("validate")&&a.fn.asyncsubmit.save(this,c),!1})})},a.fn.asyncsubmit.save=function(b,c){var f,d=c.apiUrl?c.apiUrl:a(b).attr("action"),e=c.type?c.type:void 0===a(b).attr("method")||""===a(b).attr("method")?"GET":a(b).attr("method").toUpperCase();"jsonp"===c.dataType&&(e="GET"),c.priceRound&&a(b).find("."+c.priceClassName).each(function(){var b=parseFloat(a(this).val()).toFixed(c.pricePrecision);a(this).val(b)}),c.onSavingInterface&&c.onSavingInterface(),f={url:d,data:a(b).serialize(),type:e,dataType:c.dataType,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},error:function(){c.onErrorInterface()},success:function(a){"200"===a.code.toString()?c.onSuccessInterface(a.result):c.onExceptionInterface(a.message)}},"jsonp"===c.dataType&&(f.jsonpCallback="callback");try{a.ajax(f)}catch(g){console.log("错误名称："+g.name+"\n错误描述："+g.message)}},a.fn.asyncsubmit.defaults={apiUrl:"",utilStaticPrefix:"dev01.guanaitui.cn/guanaihui/js/util",submitBtnSelector:"[type='submit']",beforeSaveInterface:null,onSavingInterface:null,onErrorInterface:null,onSuccessInterface:null,onExceptionInterface:null,type:"POST",dataType:"json",priceRound:!0,priceClassName:"price-round",pricePrecision:2,promptPosition:"topLeft",scroll:!0}}(jQuery);