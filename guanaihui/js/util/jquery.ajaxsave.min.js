!function(e){e.fn.ajaxsave=function(a){var t=e.extend({},e.fn.ajaxsave.defaults,a);return this.each(function(){var a=e(this).hasClass("validate"),n=this;a&&require(["http://cdn08.360guanai.com/guanaihui/js/util/validation/js/languages/jquery.validationEngine-zh_CN.js","http://cdn08.360guanai.com/guanaihui/js/util/validation/js/jquery.validationEngine.js"],function(){e(n).validationEngine({promptPosition:t.promptPosition,autoHidePrompt:!0,autoHideDelay:5e3,scroll:t.scroll})}),e(t.submitBtnSelector).click(function(){e(n).trigger("submit")}),e(this).submit(function(){return t.beforeSaveInterface&&t.beforeSaveInterface(),e(this).validationEngine("validate")&&e.fn.ajaxsave.save(this,t),!1})})},e.fn.ajaxsave.save=function(a,t){var n=e(a).attr("action"),i=void 0===e(a).attr("method")?"GET":e(a).attr("method").toUpperCase();t.priceRound&&e(a).find("."+t.priceClassName).each(function(){var a=parseFloat(e(this).val()).toFixed(t.pricePrecision);e(this).val(a)}),t.onSavingInterface&&t.onSavingInterface();try{e.ajax({url:n,data:e(a).serialize(),type:i,dataType:t.dataType,jsonpCallback:"callback",beforeSend:function(e){e.setRequestHeader("X-Requested-With","XMLHttpRequest")},error:function(){t.onErrorInterface()},success:function(e){"200"===e.code.toString()?t.onSuccessInterface(e.result):t.onExceptionInterface(e.message)}})}catch(o){console.log("错误名称："+o.name+"\n错误描述："+o.message)}},e.fn.ajaxsave.defaults={submitBtnSelector:"input[type='submit']",beforeSaveInterface:null,onSavingInterface:null,onErrorInterface:null,onSuccessInterface:null,onExceptionInterface:null,dataType:"jsonp",priceRound:!0,priceClassName:"price-round",pricePrecision:2,promptPosition:"topLeft",scroll:!0}}(jQuery);