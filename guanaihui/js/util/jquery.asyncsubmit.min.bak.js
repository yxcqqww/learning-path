!function(e){e.fn.asyncsubmit=function(t){var n=e.extend({},e.fn.asyncsubmit.defaults,t);return this.each(function(){var t=e(this).hasClass("validate"),a=this;t&&require([n.utilStaticPrefix+"/validation/js/languages/jquery.validationEngine-zh_CN.js",n.utilStaticPrefix+"/validation/js/jquery.validationEngine.js"],function(){e(a).validationEngine({promptPosition:n.promptPosition,autoHidePrompt:!0,autoHideDelay:5e3,scroll:n.scroll})}),e(this).find(n.submitBtnSelector).click(function(){e(a).trigger("submit")}),e(this).submit(function(){return n.beforeSaveInterface&&n.beforeSaveInterface(),e(this).validationEngine("validate")&&e.fn.asyncsubmit.save(this,n),!1})})},e.fn.asyncsubmit.save=function(t,n){var a=n.apiUrl?n.apiUrl:e(t).attr("action"),i=n.type?n.type:void 0===e(t).attr("method")||""===e(t).attr("method")?"GET":e(t).attr("method").toUpperCase();"jsonp"===n.dataType&&(i="GET"),n.priceRound&&e(t).find("."+n.priceClassName).each(function(){var t=parseFloat(e(this).val()).toFixed(n.pricePrecision);e(this).val(t)}),n.onSavingInterface&&n.onSavingInterface();var r={url:a,data:e(t).serialize(),type:i,dataType:n.dataType,beforeSend:function(e){e.setRequestHeader("X-Requested-With","XMLHttpRequest")},error:function(){n.onErrorInterface()},success:function(e){"200"===e.code.toString()?n.onSuccessInterface(e.result):n.onExceptionInterface(e.message)}};"jsonp"===n.dataType&&(r.jsonpCallback="callback");try{e.ajax(r)}catch(o){console.log("错误名称："+o.name+"\n错误描述："+o.message)}},e.fn.asyncsubmit.defaults={apiUrl:"",utilStaticPrefix:"dev01.guanaitui.cn/guanaihui/js/util",submitBtnSelector:"[type='submit']",beforeSaveInterface:null,onSavingInterface:null,onErrorInterface:null,onSuccessInterface:null,onExceptionInterface:null,type:"POST",dataType:"json",priceRound:!0,priceClassName:"price-round",pricePrecision:2,promptPosition:"topLeft",scroll:!0}}(jQuery);