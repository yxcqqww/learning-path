!function(e){e.fn.cascadeSelect=function(a){var t=e.extend({},e.fn.cascadeSelect.defaults,a),n=t.crossDomain?"jsonp":"json",l=t.crossDomain?"GET":t.requestType,s=t.jsonpCallback;return t.url?this.each(function(){var a=e(this);"string"==typeof t.url?e.ajax({url:t.url,type:l,dataType:n,data:l,jsonpCallback:s,success:function(n){200===n.code?e.fn.cascadeSelect.init(a,t,n.result):console.error("ajax callBack error")},error:function(){console.error("ajax error")}}):e.fn.cascadeSelect.init(a,t,e.parseJSON(t.url))}):void console.error("url is null")},e.fn.cascadeSelect.init=function(a,t,n){var l=className=defaultval="",s=n[t.dataKey],c=null===t||null===t.onInitInterface||void 0===t.onInitInterface?null:t.onInitInterface;null!=t.nameAttrs&&(l=t.nameAttrs[0]),t.classAttrs&&(className=t.classAttrs[0]),t.defaultVals&&(defaultval=t.defaultVals[0]),a.append(e.fn.cascadeSelect.genSelect(l,className,defaultval,s,t));for(var o=1;o<t.level;o++){if(null!=t.nameAttrs&&t.nameAttrs.length>=o&&(l=t.nameAttrs[o]),null!=t.classAttrs&&t.classAttrs.length>=o&&(className=t.classAttrs[o]),null!=t.defaultVals&&t.defaultVals.length>=o){defaultval=t.defaultVals[o];var r=a.find("select:eq("+(o-1)+")");s=r.find("option:selected").data("options")}else s=null;a.append(e.fn.cascadeSelect.genSelect(l,className,defaultval,s,t))}c&&c(),a.find("select").each(function(n,l){n<t.level-1&&e.fn.cascadeSelect.bindEvents(a,e(l),n+1,t)})},e.fn.cascadeSelect.genSelect=function(a,t,n,l,s){var c=e("<select></select>");s.isShowFirst||c.append("<option value=''>请选择</option>"),c.addClass(t).attr("name",a),void 0!=l&&l.length>0&&e.each(l,function(a,t){var n=Object.keys(t),l=e("<option></option>").data("options",t[s.subdataKey]).attr("data-name",t[n[0]]).val(n[0]).html(t[n[0]]);l.appendTo(c)});var o=c.find("option[data-name='"+n+"']");return c.val(o.length>0?o.val():n),c},e.fn.cascadeSelect.bindEvents=function(a,t,n,l){t.on("change",function(){var t=e(this),s=a.find("select:eq("+n+")");a.find("select").each(function(a,t){a+1>n&&(l.isShowFirst||e(t).empty().append("<option value=''>请选择</option>"))});var c=t.find("option:selected").data("options");void 0!=c&&c.length>0?e.each(c,function(a,t){var n=Object.keys(t),c=e("<option></option>").data("options",t[l.subdataKey]).attr("data-name",t[n[0]]).val(n[0]).html(t[n[0]]);c.appendTo(s)}):"none"===l.nodata&&s.hide()})},e.fn.cascadeSelect.defaults={level:3,url:null,defaultVals:null,nodata:null,isShowFirst:!1,crossDomain:!1,requestType:"GET",jsonpCallback:"callback",nameAttrs:null,classAttrs:null,dataKey:"areaList",subdataKey:"childrens",onInitInterface:null}}(jQuery);