!function(e){e.fn.methodizetable=function(a){var n=e.extend({},e.fn.methodizetable.defaults,a);return this.each(function(){var a=this;e.fn.methodizetable.init(this,n),e(this).find("thead .handle i").click(function(){var t=this;e(a).find("tbody tr").each(function(){e.fn.methodizetable.switchRowCheckedStatus(this,!e(t).hasClass("icon-18-checked"),n)}),e(this).toggleClass("icon-18-checked").toggleClass("icon-18-unchecked"),e.fn.methodizetable.union(a,n)}),e(this).find("tbody tr").each(function(){var t=this;e(this).find(".handle i").click(function(){e.fn.methodizetable.switchRowCheckedStatus(t,!e(this).hasClass("icon-18-checked"),n);var i=e(a).find("tbody .handle .icon-18-checked").size()===e(a).find("tbody .handle .icon-18").size();i?e(a).find("thead .handle i").addClass("icon-18-checked").removeClass("icon-18-unchecked"):e(a).find("thead .handle i").removeClass("icon-18-checked").addClass("icon-18-unchecked"),e.fn.methodizetable.union(a,n)})})})},e.fn.methodizetable.init=function(a,n){e(a).find("thead input[name='"+n.handleName+"']").after(e(document.createElement("INPUT")).attr("name",n.dataSaveHiddenName).attr("type","hidden")),e(a).find("tr").each(function(){var a=e(this).find("input[name='"+n.handleName+"']"),t=a.is(":checked")?"checked":"unchecked",i=e(document.createElement("I")).attr("data-id",e(this).attr("data-id")).addClass("icon-18 icon-18-"+t);a.replaceWith(i)})},e.fn.methodizetable.switchRowCheckedStatus=function(a,n,t){if(0!==e(a).find(".handle i").size()){var i=e(a).find(".handle i");n?e(a).addClass(t.activeRowClassName):e(a).removeClass(t.activeRowClassName),n?i.addClass("icon-18-checked").removeClass("icon-18-unchecked"):i.addClass("icon-18-unchecked").removeClass("icon-18-checked"),i=null}},e.fn.methodizetable.union=function(a,n){var t=new Array;e(a).find("tbody .handle i").each(function(){e(this).hasClass("icon-18-checked")&&t.push(e(this).attr("data-id"))}),e(a).find("input[name='"+n.dataSaveHiddenName+"']").val(t.join(n.separator))},e.fn.methodizetable.defaults={activeRowClassName:"on",separator:",",dataSaveHiddenName:"methodize-table-checked-set",handleName:"row-handle"}}(jQuery);