!function(t){t.fn.tagswitch=function(a){var i=t.extend({},t.fn.tagswitch.defaults,a);return this.each(function(){var a=this;t(this).find(".tag-switch").each(function(){var n=t.fn.tagswitch.createTag(this);t(this).replaceWith(n),t(n).click(function(){t.fn.tagswitch.tagClick(this),t.fn.tagswitch.total(a,i)})})})},t.fn.tagswitch.tagClick=function(a){t.fn.tagswitch.switchTag(a,t(a).find(".sign"),!t(a).hasClass("on"));var i=t(a).attr("data-role");if("captain"===i)t(a).siblings(".tag-switch").each(function(){t.fn.tagswitch.switchTag(this,t(this).find(".sign"),t(a).hasClass("on"))});else{var n=t(a).parent().children(".tag-switch[data-role!='captain']"),s=t(n).filter(".on").size(),c=t(a).siblings(".tag-switch[data-role='captain']");t.fn.tagswitch.switchTag(c,t(c).find(".sign"),s===t(n).size())}},t.fn.tagswitch.createTag=function(a){var i=t(document.createElement("A")).addClass("tag-switch").attr("href","javascript:void(0);").attr("data-value",t(a).attr("value")),n=t(document.createElement("SPAN")).addClass("sign").append(t(document.createElement("I")).addClass("iconfont icon-gouxuan"));return t(i).append(t(document.createElement("SPAN")).addClass("description").html(t(a).attr("data-label"))).append(n),"captain"===t(a).attr("data-role")&&t(i).attr("data-role","captain"),t.fn.tagswitch.switchTag(i,n,t(a).is(":checked")),i},t.fn.tagswitch.switchTag=function(a,i,n){n?(t(a).addClass("on"),t(i).css({visibility:"visible"})):(t(a).removeClass("on"),t(i).css({visibility:"hidden"}))},t.fn.tagswitch.total=function(a,i){var n=new Array;t(a).find(".tag-switch").each(function(){t(this).hasClass("on")&&"captain"!==t(this).attr("data-role")&&n.push(t(this).attr("data-value"))}),t(i.dataSaveInto).val(n.join(i.separator))},t.fn.tagswitch.defaults={dataSaveInto:null,separator:","}}(jQuery);