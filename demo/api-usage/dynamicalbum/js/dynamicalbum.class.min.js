function dynamicalbum(t){this.container=null==t||null==t.container?null:t.container,this.containerClass=null==t||null==t.containerClass?"album-conainer":t.containerClass,this.initPictList=null==t||null==t.initPictList?[]:t.initPictList,this.removeConfirm=null==t||null==t.removeConfirm?!0:t.removeConfirm,this.removeSyncServer=null==t||null==t.removeSyncServer?!1:t.removeSyncServer,this.removePictApiUrl=null==t||null==t.removePictApiUrl?null:t.removePictApiUrl,this.onRemove=null==t||null==t.onRemove?null:t.onRemove,this.init()}dynamicalbum.prototype.init=function(){$("head").append($(document.createElement("LINK")).attr("rel","stylesheet").attr("href","http://cdn01.51autoimg.com/51auto/css/dynamic-album.min.css")),$(this.container).addClass(this.containerClass),$(this.container).empty();var t=this;$.each(this.initPictList,function(e,n){t.add(n)})},dynamicalbum.prototype.add=function(t){var e=this,n=document.createElement("DL");$(n).append($(document.createElement("DT")).append($(document.createElement("IMG")).attr("src",t.url).attr("data-id",t.id)));var i=$(document.createElement("A")).text("移除");$(i).bind("click",function(){for(var t=$(this).parent();"DL"!=$(t)[0].tagName.toUpperCase();)t=$(t).parent();e.removeConfirm?art.dialog.confirm("你确定要移除这张图片吗？",function(){e.remove(t)},function(){art.dialog.tips("您取消了移除操作")}):e.remove(t)});var a=$(document.createElement("A")).text("显示图片地址");$(a).bind("click",function(){for(var t=$(this).parent();"DL"!=$(t)[0].tagName.toUpperCase();)t=$(t).parent();art.dialog.alert($(t).find("dt img").attr("src"))}),$(n).append($(document.createElement("DD")).append(i).append(a)),$(this.container).append(n),i=null,a=null,n=null},dynamicalbum.prototype.remove=function(t){var e=this,n=art.dialog.tips("正在执行图片移除操作，请稍等...",100);if(this.removeSyncServer)try{$.ajax({url:this.removePictApiUrl,data:{id:$(t).find("dt img").attr("data-id")},type:"GET",dataType:"json",async:!0,error:function(){n.close(),art.dialog.alert("调用移除图片API失败 ! ")},success:function(i){n.close(),i.error?art.dialog.alert(i.message):($(t).remove(),e.onRemove&&e.onRemove(),art.dialog.tips("删除图片成功 ！ ",1))}})}catch(i){n.close(),art.dialog.alert("错误名称："+i.name+"\n错误描述："+i.message)}else n.close(),$(t).remove(),e.onRemove&&e.onRemove(),art.dialog.tips("删除图片成功 ！ ",1)},dynamicalbum.prototype.union=function(t,e){var e=e||"&",n="";$(this.container).find("dt img").each(function(){""!=n&&(n+=e),n+=$(this).attr("data-id").toString()}),$(t).val(n)};