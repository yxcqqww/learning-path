function dynamicalbum(e){this.container=null==e||null==e.container?null:e.container,this.containerClass=null==e||null==e.containerClass?"album-conainer":e.containerClass,this.initPictList=null==e||null==e.initPictList?[]:e.initPictList,this.removeConfirm=null==e||null==e.removeConfirm?!0:e.removeConfirm,this.removeSyncServer=null==e||null==e.removeSyncServer?!1:e.removeSyncServer,this.removePictApiUrl=null==e||null==e.removePictApiUrl?null:e.removePictApiUrl,this.onRemove=null==e||null==e.onRemove?null:e.onRemove,this.init()}dynamicalbum.prototype.init=function(){$(this.container).addClass(this.containerClass),$(this.container).empty();var e=this;$.each(this.initPictList,function(t,n){e.add(n)})},dynamicalbum.prototype.add=function(e){var t=this,n=document.createElement("DL");$(n).append($(document.createElement("DT")).append($(document.createElement("IMG")).attr("src",e.url).attr("data-id",e.id)));var i=$(document.createElement("A")).text("移除");$(i).bind("click",function(){for(var e=$(this).parent();"DL"!=$(e)[0].tagName.toUpperCase();)e=$(e).parent();t.removeConfirm?art.dialog.confirm("你确定要移除这张图片吗？",function(){t.remove(e)},function(){art.dialog.tips("您取消了移除操作")}):t.remove(e)});var a=$(document.createElement("A")).text("显示图片地址");$(a).bind("click",function(){for(var e=$(this).parent();"DL"!=$(e)[0].tagName.toUpperCase();)e=$(e).parent();art.dialog.alert($(e).find("dt img").attr("src"))}),$(n).append($(document.createElement("DD")).append(i).append(a)),$(this.container).append(n),i=null,a=null,n=null},dynamicalbum.prototype.remove=function(e){var t=this,n=art.dialog.tips("正在执行图片移除操作，请稍等...",100);if(this.removeSyncServer)try{$.ajax({url:this.removePictApiUrl,data:{id:$(e).find("dt img").attr("data-id")},type:"GET",dataType:"json",async:!0,error:function(){n.close(),art.dialog.alert("调用移除图片API失败 ! ")},success:function(i){n.close(),i.error?art.dialog.alert(i.message):($(e).remove(),t.onRemove&&t.onRemove(),art.dialog.tips("删除图片成功 ！ ",1))}})}catch(i){n.close(),art.dialog.alert("错误名称："+i.name+"\n错误描述："+i.message)}else n.close(),$(e).remove(),t.onRemove&&t.onRemove(),art.dialog.tips("删除图片成功 ！ ",1)},dynamicalbum.prototype.union=function(e,t){var t=t||"&",n="";$(this.container).find("dt img").each(function(){""!=n&&(n+=t),n+=$(this).attr("data-id").toString()}),$(e).val(n)};