/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：guanaihui前端MVC框架
 2. 页面名称：Controller (每个页面的类都继承于这个控制器基类)
 3. 作者：zhaohuagang@guanaihui.com
4. 备注：对api的依赖：jQuery
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
function Controller() {    
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    整站关于浏览器兼容性的处理，IE太垃圾了
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.compatible = function() {
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        对于所有的form-control，将宽度减去他的padding值和border值，为了兼容IE6-8，元素的box-sizing都是用默认的content-box，也就是说设置的元素的宽高是不包含
        border和padding的，而form-control元素的默认宽度是100%，所以她会比外层容器多出padding *2
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        
        $(".form-control").each(function() {            
            $(this).width($(this).width() - parseInt($(this).css("padding-left"), 10) - parseInt($(this).css("padding-right") , 10) - parseInt($(this).css("border-left-width"), 10) - parseInt($(this).css("border-right-width"), 10)) ;
        }) ;
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        条纹状表格轮替颜色设置
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        $(".table-striped tbody").each(function(){
            $(this).find("tr").each(function(index, element){
                if(index % 2 == 0) $(element).css({"background-color" : "#f9f9f9"}) ;
            }) ;
        }) ;
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        悬停变色表格设置
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        $(".table-hover tbody tr").each(function(){
            $(this).hover(function(){
                $(this).css({"background-color" : "#f9f9f9"}) ;
            }, function(){
                $(this).css({"background-color" : "transparent"}) ;
            }) ;
        }) ;
    } ;   
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    页面加载的时候执行的公共逻辑
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    this.onload = function(){
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        整站关于浏览器兼容性的处理，IE太垃圾了
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.compatible() ;         
    } ;    
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    整个基类逻辑结束
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/    
    this.onload() ;    
} ;
